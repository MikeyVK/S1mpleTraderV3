# Scaffold Metadata Configuration
#
# Defines patterns for detecting and validating metadata in scaffolded files.
# Used by ScaffoldMetadataParser to parse SCAFFOLD comments.
#
# NEW FORMAT (Issue #72): 2-line format without "SCAFFOLD:" prefix
# Line 1: filepath only
# Line 2: metadata fields

version: "2.0"

# Comment patterns for different file types
comment_patterns:
  # Python, YAML, Shell scripts - 2 line format
  - syntax: hash
    prefix: "#\\s*"
    # Line 1: filepath
    filepath_line_regex: "^#\\s*(.+\\.(py|yaml|yml|sh|bash|zsh|txt))$"
    # Line 2: metadata
    metadata_line_regex: "^#\\s*template=.+\\s+version=.+\\s+created=.+\\s+updated=.*$"
    extensions: [".py", ".yaml", ".yml", ".sh", ".bash", ".zsh", ".txt"]
  
  # JavaScript, TypeScript, C-style languages - 2 line format
  - syntax: double_slash
    prefix: "//\\s*"
    filepath_line_regex: "^//\\s*(.+\\.(js|ts|jsx|tsx|java|c|cpp|cs|go))$"
    metadata_line_regex: "^//\\s*template=.+\\s+version=.+\\s+created=.+\\s+updated=.*$"
    extensions: [".js", ".ts", ".jsx", ".tsx", ".java", ".c", ".cpp", ".cs", ".go"]
  
  # HTML, XML, Markdown - 2 line HTML comment format
  - syntax: html_comment
    prefix: "<!--\\s*"
    filepath_line_regex: "^<!--\\s*(.+\\.(html|xml|md|markdown|svg))\\s*-->$"
    metadata_line_regex: "^<!--\\s*template=.+\\s+version=.+\\s+created=.+\\s+updated=.*\\s*-->$"
    extensions: [".html", ".xml", ".md", ".markdown", ".svg"]
  
  # Jinja2 templates - 2 line format
  - syntax: jinja_comment
    prefix: "\\{#\\s*"
    filepath_line_regex: "^\\{#\\s*(.+\\.(jinja2|j2))\\s*#\\}$"
    metadata_line_regex: "^\\{#\\s*template=.+\\s+version=.+\\s+created=.+\\s+updated=.*\\s*#\\}$"
    extensions: [".jinja2", ".j2"]

# Metadata field definitions (for line 2 key=value parsing)
metadata_fields:
  # Template identifier (required)
  - name: template
    format_regex: "^[a-z0-9_-]+$"
    required: true
  
  # Template version (required) - version_hash (8 hex chars or empty)
  - name: version
    format_regex: "^[0-9a-f]{8}$|^$"
    required: true
  
  # Creation timestamp (required) - ISO 8601 UTC format (seconds or minutes precision)
  - name: created
    format_regex: "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}(:\\d{2})?Z$"
    required: true
  
  # Last update timestamp (optional) - can be empty
  - name: updated
    format_regex: "^(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}(:\\d{2})?Z)?$"
    required: false
