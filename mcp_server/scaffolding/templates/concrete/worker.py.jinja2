{#- concrete/worker.py.jinja2 - Async Worker Class -#}
{#- Version: 1.1.0 -#}
{#- Purpose: Generate async worker classes for background task processing -#}
{%- extends "tier2_base_python.jinja2" -%}

{#-
TEMPLATE_METADATA:
  enforcement: ARCHITECTURAL
  level: content
  validates:
    guidelines:
      - "Async/await for execute() method"
      - "Optional lifecycle hooks (setup, teardown)"
      - "Type hints for all methods"
  extends: tier2_base_python.jinja2
  purpose: "Concrete template for async worker classes"
  version: "1.2.0"
  changelog:
    - version: "1.2.0"
      date: "2026-01-26"
      changes: "Changed enforcement from REQUIRED to ARCHITECTURAL (code patterns)"
    - version: "1.1.0"
      date: "2026-01-25"
      changes: "Initial version"
  introspection:
    template_id: worker
    tier: concrete
    parent: tier2_base_python
    variables:
      required:
        - name
      optional:
        - description
        - dependencies
        - lifecycle_methods
-#}

{% block type_imports -%}
from typing import Any
{% endblock -%}

{% block class_structure %}
class {{ name }}:
{% block class_docstring %}
    """{{ description | default(name + ' worker.') }}
    
    Async worker for background task processing.
    """
{% endblock -%}
{% block init_method -%}
{% if dependencies %}
    def __init__(self{% for dep in dependencies %}, {{ dep.name }}: {{ dep.type }}{% endfor %}):
        """Initialize {{ name }}."""
{% for dep in dependencies %}
        self.{{ dep.name }} = {{ dep.name }}
{% endfor -%}
{% endif -%}
{% endblock -%}
{% block execute_method %}

    async def execute(self, **kwargs: Any) -> Any:
        """Execute worker task.
        
        Args:
            **kwargs: Task-specific parameters
            
        Returns:
            Task result
        """
        # TODO: Implement worker logic
        pass
{% endblock -%}
{% block lifecycle_methods -%}
{% if lifecycle_methods -%}
{% for method in lifecycle_methods %}

    async def {{ method.name }}(self{% if method.params %}, {{ method.params }}{% endif %}){% if method.return_type %} -> {{ method.return_type }}{% endif %}:
        """{{ method.docstring | default(method.name + ' lifecycle hook.') }}"""
        {{ method.body | default('pass') | indent(8) }}
{% endfor -%}
{% endif -%}
{% endblock -%}
{% endblock %}
