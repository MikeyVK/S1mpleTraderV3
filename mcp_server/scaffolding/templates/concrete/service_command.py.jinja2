{#- concrete/service_command.py.jinja2 - Service Command Pattern -#}
{#- Version: 1.3.1 -#}
{#- Purpose: Generate service command classes (execute pattern) -#}
{%- extends "tier2_base_python.jinja2" -%}

{%- import "tier3_pattern_python_async.jinja2" as p_async -%}
{%- import "tier3_pattern_python_error.jinja2" as errors -%}
{%- import "tier3_pattern_python_logging.jinja2" as p_logging -%}
{%- import "tier3_pattern_python_di.jinja2" as di -%}
{%- import "tier3_pattern_python_translator.jinja2" as translator -%}

{#-
TEMPLATE_METADATA:
  enforcement: GUIDELINE
  level: content
  validates:
    guidelines:
      - "Command pattern with execute() method"
      - "Result/Error return types"
      - "Uses translation keys (no hardcoded UX strings)"
  extends: tier2_base_python.jinja2
  purpose: "Concrete template for service command pattern"
  version: "1.3.1"
  changelog:
    - version: "1.3.1"
      date: "2026-02-01"
      changes: "Fix module docstring, class naming, and error message key discipline"
    - version: "1.3.0"
      date: "2026-02-01"
      changes: "Refactor service command to compose Tier 3 pattern macros and set enforcement to GUIDELINE"
    - version: "1.2.0"
      date: "2026-01-26"
      changes: "Changed enforcement from REQUIRED to ARCHITECTURAL (code patterns)"
    - version: "1.1.0"
      date: "2026-01-25"
      changes: "Initial version"
  introspection:
    template_id: service_command
    tier: concrete
    parent: tier2_base_python
    variables:
      required:
        - name
      optional:
        - description
        - layer
        - responsibilities
        - parameters
        - return_type
-#}

{% block module_docstring %}
"""{{ name }} service module.

{{ description | default(name + ' service command.') }}

@layer: {{ layer | default('Backend (Services)') }}
@dependencies: [backend.utils.translator]
@responsibilities:
{% if responsibilities %}
{% for responsibility in responsibilities %}
    - {{ responsibility }}
{% endfor %}
{% else %}
    - Execute service command logic
{% endif %}
"""
{% endblock %}

{% block imports_section %}
# Standard library
from typing import Any

# Third-party

# Project modules
{{ translator.pattern_translator_imports() }}

{% endblock %}

{% block class_structure %}
{{ translator.pattern_translator_key_guideline() }}

__all__ = ["{{ name }}Service"]


class {{ name }}Service:
{% block class_docstring %}
    """{{ description | default(name + ' service command.') }}

    Service command following execute pattern.
    """
{% endblock %}

    def __init__(self, service_translator: Translator | None = None) -> None:
        self._name = "{{ name }}Service"
        self._translator = service_translator

{% block execute_method %}

    async def execute(self{% if parameters %}{% for param in parameters %}, {{ param.name }}: {{ param.type }}{% endfor %}{% endif %}){% if return_type %} -> {{ return_type }}{% else %} -> Any{% endif %}:
        """Execute service command.
        {% if parameters %}
        Args:
{% for param in parameters -%}
            {{ param.name }}: {{ param.description | default('Parameter') }}
{% endfor -%}
        {% endif %}
        Returns:
            {{ return_type | default('Any') }}
        """
        try:
            # TODO: Implement service logic
            pass
        except Exception as exc:  # noqa: BLE001
            raise RuntimeError(f"{self._name}: service.execute.failed") from exc
{% endblock %}
{% endblock %}
