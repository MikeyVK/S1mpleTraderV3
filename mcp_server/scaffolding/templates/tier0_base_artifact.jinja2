{#- tier0_base_artifact.jinja2 - SCAFFOLD Metadata Header -#}
{#- Version: 2.4.0 -#}
{#- Purpose: Provides 2-line SCAFFOLD metadata comment at top of all artifacts -#}

{#-
TEMPLATE_METADATA:
  enforcement: STRICT
  level: format
  purpose: "Base tier for all artifacts - provides SCAFFOLD metadata"
  version: "2.4.0"
  changelog:
    - version: "2.4.0"
      date: "2026-02-21"
      changes: "Conditional header: output_path=None/'' renders compact single-line metadata comment (Issue #239)"
    - version: "2.3.0"
      date: "2026-01-27"
      changes: "Removed validates.strict (descriptive strings, not machine-readable patterns)"
    - version: "2.2.0"
      date: "2026-01-27"
      changes: "Removed blank line requirement after SCAFFOLD metadata per user requirement"
    - version: "2.1.0"
      date: "2026-01-26"
      changes: "Added title line after SCAFFOLD metadata per BASE_TEMPLATE pattern"
    - version: "2.0.0"
      date: "2026-01-26"
      changes: "Format-adaptive SCAFFOLD with 2-line comment (Issue #72 Cycle 2)"
    - version: "1.0.0"
      date: "2026-01-25"
      changes: "Initial version with basic SCAFFOLD structure"
  introspection:
    template_id: base_artifact
    tier: tier0
    variables:
      required:
        - artifact_type
        - version_hash
        - timestamp
        - format
        - title
      optional:
        - output_path  # None or '' = compact single-line header; non-empty = two-line header with filepath
      provides:
        - SCAFFOLD metadata
        - format-adaptive comment syntax
  notes:
    - "SCAFFOLD format with output_path: Line 1 = filepath, Line 2 = metadata (template=X version=Y created=Z updated=)"
    - "SCAFFOLD format without output_path (None/''): single line = metadata only (template=X version=Y)"
    - "NO blank line required after SCAFFOLD metadata"
    - "Format-adaptive: # for Python/YAML, <!-- --> for Markdown"
-#}

{#- WHITESPACE STRATEGY (Issue #72):
    Block opening with right-trim ({% block content -%}) prevents extra blank lines
-#}

{%- if format == "markdown" -%}
{%- if output_path -%}
<!-- {{ output_path }} -->
<!-- template={{ artifact_type }} version={{ version_hash }} created={{ timestamp }} updated= -->
{%- else -%}
<!-- template={{ artifact_type }} version={{ version_hash }} -->
{%- endif -%}
{%- else -%}
{%- if output_path -%}
# {{ output_path }}
# template={{ artifact_type }} version={{ version_hash }} created={{ timestamp }} updated=
{%- else -%}
# template={{ artifact_type }} version={{ version_hash }}
{%- endif -%}
{%- endif %}

{%- block content -%}
{%- endblock -%}
