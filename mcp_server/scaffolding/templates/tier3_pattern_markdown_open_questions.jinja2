{# tier3_pattern_markdown_open_questions.jinja2 #}
{# template=tier3_pattern version=1.0.0 #}
"""
TEMPLATE_METADATA:
  enforcement: ARCHITECTURAL
  tier: 3
  category: pattern
  provides_macros:
    - pattern_open_questions_section
  used_by:
    - research.md
    - planning.md
    - design.md
"""

{% macro pattern_open_questions_section(questions, section_number=None, as_table=False) -%}
{% if section_number -%}
## {{ section_number }}. Open Questions
{% else -%}
## Open Questions
{% endif %}

{% if as_table -%}
| Question | Options | Status |
|----------|---------|--------|
{% for q in questions -%}
{% if q is mapping -%}
| {{ q.question }} | {{ q.options | default("") }} | {{ "BLOCKING" if q.blocking else (q.status | default("")) }} |
{% else -%}
| {{ q }} |  |  |
{% endif -%}
{% endfor %}
{% else -%}
{% for q in questions -%}
{% if q is mapping -%}
- **Q{{ loop.index }}:** {{ q.question }}
  {% if q.context -%}
  - Context: {{ q.context }}
  {% endif -%}
  {% if q.blocking -%}
  - ⚠️ BLOCKING
  {% endif %}
{% else -%}
- ❓ {{ q }}
{% endif %}
{% endfor %}
{% endif %}
{%- endmacro %}

{# Changelog:
- v1.0.0 (2026-02-05): Initial macro library with structured question list pattern
#}
