# artifact: type={{ template_id }}, version={{ template_version }}, created={{ scaffold_created }}
{% if fixtures %}# pylint: disable=redefined-outer-name  # pytest fixtures
{% endif %}
"""
@module: tests.integration.{{ test_module }}
@layer: Test Infrastructure
@dependencies: [pytest{% if dependencies %}, {{ dependencies | join(', ') }}{% endif %}]
@responsibilities:
{% for responsibility in responsibilities %}    - {{ responsibility }}
{% endfor %}
"""
{% if test_private_methods %}
# pyright: basic, reportPrivateUsage=false
{% endif %}
# Standard library
from pathlib import Path

# Third-party
import pytest
{% if extra_third_party_imports %}
{% for import_line in extra_third_party_imports %}
{{ import_line }}
{% endfor %}
{% endif %}

# Project modules
{% if extra_project_imports %}
{% for import_line in extra_project_imports %}
{{ import_line }}
{% endfor %}
{% endif %}

{% if fixtures %}
{% for fixture in fixtures %}
@pytest.fixture(name="{{ fixture.name }}")
def fixture_{{ fixture.name }}({% if fixture.params %}{{ fixture.params | join(', ') }}{% endif %}) -> {{ fixture.return_type }}:
    """{{ fixture.purpose }}"""
{% if fixture.implementation %}{{ fixture.implementation | indent(4, first=False) }}
{% else %}    # TODO: Implement fixture
    pass
{% endif %}

{% endfor %}
{% endif %}
{% if test_methods %}
{% for test in test_methods %}
{% if test.is_async %}@pytest.mark.asyncio
async def test_{{ test.name }}(
{% else %}def test_{{ test.name }}(
{% endif %}{% if test.fixtures %}    {{ test.fixtures | join(',\n    ') }}{% endif %}
) -> None:
    """{{ test.docstring }}"""
{% if test.structure == 'given_when_then' %}    # Arrange
    # TODO: Setup test data and context

    # Act
    # TODO: Execute E2E operation

    # Assert
    # TODO: Verify expected outcomes and side effects
{% else %}    # TODO: Implement test
    pass
{% endif %}

{% endfor %}
{% else %}
@pytest.mark.asyncio
async def test_placeholder() -> None:
    """Placeholder test - replace with actual E2E tests."""
    assert True
{% endif %}
