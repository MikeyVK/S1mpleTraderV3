{# base/base_test.py.jinja2 - Base template for all test files #}
{#
   All test templates extend this base to enforce:
   - Consistent test file header
   - Proper import organization (stdlib → third-party → local)
   - snake_case mock naming (mock_manager_class, NOT MockManager)
   - Type hints on fixtures and test methods
   - Docstrings on all test classes and methods
   - Async test support via pytest.mark.asyncio

   Usage:
   {% extends "base/base_test.py.jinja2" %}
   {% block module_under_test %}module.path{% endblock %}
   {% block test_classes %}...{% endblock %}
#}
{# ═══════════════════════════════════════════════════════════════════════════
   FILE HEADER BLOCK
   ═══════════════════════════════════════════════════════════════════════════ #}
# {% block filepath %}{{ test_output_path | default('tests/unit/test_module.py') }}{% endblock %}
"""
{% block test_description %}Unit tests for {{ name }}.{% endblock %}

{% block test_extended_description %}Tests according to TDD principles with comprehensive coverage.{% endblock %}

@layer: Tests (Unit)
@dependencies: [pytest{% block extra_test_deps %}{% endblock %}]
"""
{% block test_pyright_suppressions %}
# pyright: reportCallIssue=false, reportAttributeAccessIssue=false
# Suppress Pydantic FieldInfo false positives
{% endblock %}
{# ═══════════════════════════════════════════════════════════════════════════
   IMPORTS - Always: stdlib → third-party → module under test
   ═══════════════════════════════════════════════════════════════════════════ #}
{% block test_stdlib_imports %}
# Standard library
from datetime import datetime, timezone
from decimal import Decimal
from unittest.mock import AsyncMock, MagicMock, patch
{% endblock %}

{% block test_thirdparty_imports %}
# Third-party
import pytest
{% endblock %}

{% block test_module_imports %}
# Module under test
{% endblock %}

{# ═══════════════════════════════════════════════════════════════════════════
   SHARED FIXTURES BLOCK
   Note: Mock classes use snake_case (mock_manager_class, NOT MockManager)
   ═══════════════════════════════════════════════════════════════════════════ #}
{% block shared_fixtures %}
{% endblock %}

{# ═══════════════════════════════════════════════════════════════════════════
   TEST CLASSES BLOCK
   ═══════════════════════════════════════════════════════════════════════════ #}
{% block test_classes %}
# Test classes go here
{% endblock %}
